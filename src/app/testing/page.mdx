export const metadata = {
  title: 'Testj g',
  description:
    'Testing for mevETH Protocol and Services.',
};

# Testing

> Note: This covers the entire stack, from protocol to infrastructure.

A system's overall availability is a function of the cumulative availability of each of its services


Generally we test and monitor for:
Dependency health checks
Anomaly detection



## Testing Methodology

### Overview

The network is segmented into X number of validators. Every ~10 minutes, validators are randomly assigned to a validator, so the stress point is observing and testing the ability of validators to subscribe to new topics and send/receive messages pertaining to this new topic in an adequate amount of time.


### Parameters
The following functionalities would likely be most relevant to this particular test series:

* Number of different clients
* Automated provisioning of nodes
* Behaviors, parameters, commands, and actions can be automated or assigned to individual nodes and also the network as a whole.
* Bandwidth: 1G (standard, up to 10G if necessary) can be configured and assigned to each individual node.
* VLAN: Each node can be configured within its own VLAN and assigned a unique IP address, allowing for the emulation of realistic network conditions which accurately mimic real-world conditions.
* Latency: Up to 1 second of network latency can be applied to each node’s individual link.
* Data aggregation and visualization

### Test Scenarios

* Observe and measure performance under the presence of various network conditions.
  * Latency between nodes:
    * What is the maximum amount of network latency each individual node can tolerate before performance begins to degrade?
    * What are the security implications of high degrees of latency?
    * Are there any other unforeseen issues which may arise from network conditions for which we can’t accommodate via traditional code?
  * Latency between validators.
  * Intermittent blackout conditions
  * High degrees of packet loss
  * Bandwidth constraints (various bandwidth sizes)
  * Crash state?
  * Recovery state?

* Introduce new nodes to network:
  * Add/remove nodes at random.
  * Add/remove nodes at set intervals.
  * Introduce a high volume of nodes simultaneously.

* Partition tolerance
  * Prevent segments of nodes from communicating with one another.
* Measure the performance of sending/receiving messages within set time periods and repeat for N epochs.
* Observe process of nodes joining and leaving validators
  * Subscribing to validators
  * Connecting to other nodes within validator
  * Synchronize collations and `validatorPreferenceTable`
  * Unsubscribing from validators


## System Under Test

The following tables define each test series within this test phase. A test series focuses on observing and documenting the effects of certain conditions on performance. Each test series is comprised of three separate test cases which define the variable to be tested.

It is important to note that each test series may yield unexpected results which may influence the configuration of subsequential test cases or series. Accounting for this notion, this test plan should be considered a living document subject to change. Based on the results of this test phase, a consecutive test phase may be developed.


### Series 1: Number of Validators

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 300 | 600 | 1000 |
| Static Nodes | 600 | 600 | 600 |
| Mempool Backpressure | 5 | 5 | 5 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0% | 0% | 0% |

### Series 2: Number of Static Nodes

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 600 | 600 | 600 |
| Static Nodes | 300 | 600 | 1000 |
| Mempool Backpressure | 5 | 5 | 5 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0% | 0% | 0% |

### Series 3: Mempool Backpressure

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 1000 | 1000 |
| Static Nodes | 1000 | 1000 | 1000 |
| Mempool Backpressure | 5 | 7 | 10 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0% | 0% | 0% |

### Series 4: Message Size

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 1000 | 1000 |
| Static Nodes | 1000 | 1000 | 1000 |
| Mempool Backpressure | 10 | 10 | 10 |
| Message Size | 1KB | 100KB | 1MB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0.01% | 0.5% | 1.0% |

### Series 4: Bandwidth

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 1000 | 1000 |
| Static Nodes | 1000 | 1000 | 1000 |
| Mempool Backpressure | 5 | 5 | 5 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 500Mb | 1G |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0% | 0% | 0% |

### Series 5: Network Latency

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 1000 | 1000 |
| Static Nodes | 1000 | 1000 | 1000 |
| Mempool Backpressure | 10 | 10 | 10 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 25ms | 50ms | 100ms |
| Packet Loss | 0% | 0% | 0% |

### Series 6: Packet Loss

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 1000 | 1000 |
| Static Nodes | 1000 | 1000 | 1000 |
| Mempool Backpressure | 10 | 10 | 10 |
| Message Size | 100KB | 100KB | 100KB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 0ms | 0ms | 0ms |
| Packet Loss | 0.01% | 0.5% | 1.0% |

### Series 7: Stress Test

| Variable | Test Case A | Test Case B | Test Case C |
| --- | --- | --- | --- |
| Validators | 1000 | 500 | 300 |
| Static Nodes | 2000 | 2000 | 2000 |
| Mempool Backpressure | 10 | 20 | 30 |
| Message Size | 1MB | 1MB | 1MB |
| Bandwidth | 5Mb | 5Mb | 5Mb |
| Network Latency | 50ms | 50ms | 50ms |
| Packet Loss | 0.01% | 0.01% | 0.01% |
